<?php
    // Set up page title:
	$this->headTitle($this->translate('Availability Plus Test Cases'));
	
	//Load Cases
    $specsReader = new \VuFind\Config\SearchSpecsReader();
    $cases = $specsReader->get('availabilityplus-testcases.yaml');
?>
<div class="AvailabilityPlusTestCases">
<? if(!empty($cases)) { ?>
	<table>
		<tr>
			<th>PPN</th>
			<th>Driver</th>
			<th>List</th>
			<th>Description</th>
			<th>Expected</th>
			<th>Result</th>
			<th>Debug-Ansicht</th>
		</tr>
		<? foreach ($cases AS $key => $case) { ?>
		    <?
				$id = $key;
				$driver = $case['driver'];
				$list = $case['list'];
				$description = $case['description'];
				$expected = $case['expected'];

                if($driver == 'Search2') {
                    $recordRoute = 'Search2Record';
                } else {
                    $recordRoute = 'Record';
                }
			?>
			<tr>
                <td><a href="/vufind/<?=$recordRoute?>Record/<?=$id?>" target="_blank"><?=$id?></a></td>
				<td><?=$driver?></td>
				<td><?=$list?></td>
				<td><?=$description?></td>
				<td><?=$expected?></td>
				<td>
					<div class="AvailabilityPlusTestCases">
					<?=$this->render('availabilityplus/item.phtml', ['id' => $id, 'driver' => $driver, 'list' => $list, 'mediatype' => $mediatype]) ?>
					</div>
				</td>
                <td><a href="/vufind/AvailabilityPlus/Debug/<?=$id?>?list=<?=$list?>&driver=<?=$driver?>" target="_blank">Debug-Ansicht</a></td>
            </tr>
			</tr>
		<? } ?>
	</table>
<? } else { ?>
        <div>Keine TestCases definiert</div>
<? } ?>
</div>

